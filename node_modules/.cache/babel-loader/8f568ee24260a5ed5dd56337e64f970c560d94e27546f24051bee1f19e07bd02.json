{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kevin johansen\\\\Proyecto-react-final\\\\src\\\\Paginas\\\\auth\\\\login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [email, setName] = useState('');\n  const [pass, setPass] = useState('');\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const parseToken = token => {\n    const decodedToken = token.split('.')[1];\n    const decodedData = JSON.parse(atob(decodedToken));\n    return decodedData;\n  };\n  const datosLogin = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post('http://127.0.0.1:8888/api/v1/devcamps/users/login', {\n        email,\n        password: pass\n      });\n      if (response.data && response.data.token) {\n        const tokenPayload = parseToken(response.data.token);\n        if (tokenPayload && tokenPayload.role) {\n          const {\n            name,\n            token\n          } = tokenPayload;\n          if (tokenPayload.role === 'doctor') {\n            localStorage.setItem('token', response.data.token);\n            localStorage.setItem('name', tokenPayload.name);\n            localStorage.setItem('numeroDoc', tokenPayload.numeroDoc);\n            localStorage.setItem('email', tokenPayload.email);\n            localStorage.setItem('id', tokenPayload._id);\n            navigate('/home');\n          } else if (tokenPayload.role === 'paciente') {\n            localStorage.setItem('token', token);\n            localStorage.setItem('name', name);\n            localStorage.setItem('numeroDoc', tokenPayload.numeroDoc);\n            localStorage.setItem('id', tokenPayload._id);\n            navigate('/homeC');\n          } else if (tokenPayload.role === 'admin') {\n            localStorage.setItem('token', token);\n            localStorage.setItem('name', name);\n            localStorage.setItem('numeroDoc', tokenPayload.numeroDoc);\n            localStorage.setItem('id', tokenPayload._id);\n            navigate('/admin');\n          }\n        }\n      }\n      setError('');\n    } catch (error) {\n      console.error('Error en el inicio de sesi贸n:', error);\n      if (error.response && error.response.data && error.response.data.msg) {\n        setError('Error: ' + error.response.data.msg);\n      } else {\n        setError('Error en el inicio de sesi贸n: ' + error.message);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mensajeE\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        autoComplete: \"off\",\n        onSubmit: datosLogin,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"email\",\n            id: \"name\",\n            required: true,\n            value: email,\n            onChange: e => setName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            id: \"pass\",\n            required: true,\n            value: pass,\n            onChange: e => setPass(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"ingresar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"link\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: \"Registrarse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 52\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"JqFda6AC9beleGptNgWR2EsYXCg=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","axios","jsxDEV","_jsxDEV","Login","_s","email","setName","pass","setPass","error","setError","navigate","parseToken","token","decodedToken","split","decodedData","JSON","parse","atob","datosLogin","e","preventDefault","response","post","password","data","tokenPayload","role","name","localStorage","setItem","numeroDoc","_id","console","msg","message","children","className","fileName","_jsxFileName","lineNumber","columnNumber","autoComplete","onSubmit","type","id","required","value","onChange","target","to","_c","$RefreshReg$"],"sources":["C:/Users/kevin johansen/Proyecto-react-final/src/Paginas/auth/login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\n\r\nconst Login = () => {\r\n  const [email, setName] = useState('');\r\n  const [pass, setPass] = useState('');\r\n\r\n  const [error, setError] = useState('');\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const parseToken = (token) => {\r\n    const decodedToken = token.split('.')[1];\r\n    const decodedData = JSON.parse(atob(decodedToken));\r\n    return decodedData;\r\n  };\r\n\r\n  const datosLogin = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post('http://127.0.0.1:8888/api/v1/devcamps/users/login', {\r\n        email,\r\n        password:pass,\r\n      });\r\n      if (response.data && response.data.token) {\r\n        const tokenPayload = parseToken(response.data.token);\r\n        if (tokenPayload && tokenPayload.role) {  \r\n            const { name, token } = tokenPayload;        \r\n          if (tokenPayload.role === 'doctor') {\r\n            localStorage.setItem('token', response.data.token);\r\n            localStorage.setItem('name', tokenPayload.name);\r\n            localStorage.setItem('numeroDoc', tokenPayload.numeroDoc);\r\n            localStorage.setItem('email', tokenPayload.email);\r\n            localStorage.setItem('id', tokenPayload._id);\r\n            navigate('/home');\r\n          } else if (tokenPayload.role === 'paciente') {\r\n            localStorage.setItem('token', token);\r\n            localStorage.setItem('name', name);\r\n            localStorage.setItem('numeroDoc', tokenPayload.numeroDoc);\r\n            localStorage.setItem('id', tokenPayload._id);\r\n            navigate('/homeC');\r\n          } else if (tokenPayload.role === 'admin'){\r\n            localStorage.setItem('token', token)\r\n            localStorage.setItem('name',name)\r\n            localStorage.setItem('numeroDoc', tokenPayload.numeroDoc)\r\n            localStorage.setItem('id', tokenPayload._id)\r\n            navigate('/admin')\r\n          }\r\n        }\r\n      }\r\n      setError('');\r\n  } catch (error) {\r\n    console.error('Error en el inicio de sesi贸n:', error);\r\n\r\n    if (error.response && error.response.data && error.response.data.msg) {\r\n      setError('Error: ' + error.response.data.msg);\r\n    } else {\r\n      setError('Error en el inicio de sesi贸n: ' + error.message);\r\n    }\r\n  }\r\n};\r\n\r\n  return (\r\n    <section>\r\n      <div className='form-container'>\r\n        <h1>Login</h1>\r\n        {error && (\r\n            <div className='mensajeE'>\r\n            {error}\r\n            </div>\r\n        )}\r\n        <form autoComplete='off' onSubmit={datosLogin}>\r\n          <div className='control'>\r\n            <label>email</label>\r\n            <input type='text' name='email' id='name' required value={email} onChange={(e) => setName(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className='control'>\r\n            <label>Password</label>\r\n            <input type='password'name='password' id='pass' required value={pass} onChange={(e) => setPass(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className='control'>\r\n            <input type='submit' value='ingresar' />\r\n          </div>\r\n        </form>\r\n        <div className='link'>\r\n          <Link to={\"/register\"}>Registrarse</Link><br/>\r\n        </div>\r\n      </div>\r\n\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}